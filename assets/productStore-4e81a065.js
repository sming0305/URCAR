import{bu as m,bv as n}from"./index-287e9003.js";const{VITE_API_PATH:l,VITE_API_URL:p}={VITE_API_PATH:"truth",VITE_API_URL:"https://vue3-course-api.hexschool.io/v2/",BASE_URL:"/URCAR/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},h=m("homePageStore",{state:()=>({productList:[],allProductList:[],productTemp:{},productPagination:{},currentRoute:"",category:"all",offsetTop:0}),actions:{getProduct(t,e){n.get(`${p}api/${l}/products?page=${e}`).then(o=>{this.productList=this.formattedPrice(o.data.products),this.productPagination=o.data.pagination,this.currentRoute=t}).catch(o=>{alert(`${o}，頁面載入錯誤，請連繫客服人員，謝謝。`)})},getAllProduct(){n.get(`${p}api/${l}/products/all`).then(t=>{this.allProductList=this.formattedPrice(t.data.products)}).catch(t=>{alert(`${t}，頁面載入錯誤，請連繫客服人員，謝謝。`)})},switchCategory(t){this.category=t},getTargetProduct(t){this.productTemp={},n.get(`${p}api/${l}/product/${t}`).then(e=>{this.productTemp=e.data.product,this.productTemp.price=this.productTemp.price.toLocaleString("en-US",{style:"decimal",maximumFractionDigits:2}),this.productTemp.origin_price=this.productTemp.origin_price.toLocaleString("en-US",{style:"decimal",maximumFractionDigits:2})}).catch(e=>{alert(`${e.message}，頁面載入錯誤，請連繫客服人員，謝謝。`)})},formattedPrice(t){let e=t;return t.forEach((o,a)=>{const s=o.price.toLocaleString("en-US",{style:"decimal",maximumFractionDigits:2}),c=o.origin_price.toLocaleString("en-US",{style:"decimal",maximumFractionDigits:2});e[a].price=s,e[a].origin_price=c}),e},handleScroll(t){t===window?(console.log(window.scrollY),this.offsetTop=window.scrollY):this.offsetTop=t.target.scrollTop},goTop(t){t.name==="home"?document.getElementsByClassName("scroll-card")[0].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):t.name!=="home"&&document.getElementsByTagName("main")[0].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},getters:{showProductList:({productList:t,currentRoute:e,category:o,allProductList:a})=>{if(e==="home"){const c=t.filter(r=>r.category==="Model3"||r.category==="ModelY"||r.category==="ModelX").reduce((r,i)=>((!r[i.category]||i.price<r[i.category].price)&&(r[i.category]=i),r),{});return Object.values(c).sort(function(r,i){return r.price>i.price?1:-1})}else if(e==="productlist")return o==="all"?t:a.filter(c=>c.category===o)}}});export{h as p};
