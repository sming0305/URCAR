import{S as u,T as p}from"./index-806ba022.js";const{VITE_API_PATH:n,VITE_API_URL:l}={VITE_API_PATH:"truth",VITE_API_URL:"https://vue3-course-api.hexschool.io/v2/",BASE_URL:"/URCAR/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},T=u("homePageStore",{state:()=>({productList:[],allProductList:[],productTemp:{},productPagination:{},currentRoute:"",category:"all",showBackToTop:0}),actions:{getProduct(t,e){p.get(`${l}api/${n}/products?page=${e}`).then(o=>{this.productList=this.formattedPrice(o.data.products),this.productPagination=o.data.pagination,this.currentRoute=t}).catch(o=>{alert(`${o}，頁面載入錯誤，請連繫客服人員，謝謝。`)})},getAllProduct(){p.get(`${l}api/${n}/products/all`).then(t=>{this.allProductList=this.formattedPrice(t.data.products)}).catch(t=>{alert(`${t}，頁面載入錯誤，請連繫客服人員，謝謝。`)})},switchCategory(t){this.category=t},getTargetProduct(t){this.productTemp={},p.get(`${l}api/${n}/product/${t}`).then(e=>{this.productTemp=e.data.product,this.productTemp.price=this.productTemp.price.toLocaleString("en-US"),this.productTemp.origin_price=this.productTemp.origin_price.toLocaleString("en-US")}).catch(e=>{alert(`${e.message}，頁面載入錯誤，請連繫客服人員，謝謝。`)})},formattedPrice(t){let e=t;return t.forEach((o,s)=>{const a=o.price.toLocaleString("en-US"),c=o.origin_price.toLocaleString("en-US");e[s].price=a,e[s].origin_price=c}),e},handleScroll(){const t=window.pageYOffset||document.documentElement.scrollTop,e=window.innerHeight;t>e*.5?this.showBackToTop=!0:this.showBackToTop=!1},goTop(){window.scrollTo({top:0,behavior:"smooth"})}},getters:{showProductList:({productList:t,currentRoute:e,category:o,allProductList:s})=>{if(e==="home"){const c=t.filter(r=>r.category==="Model3"||r.category==="ModelY"||r.category==="ModelX").reduce((r,i)=>((!r[i.category]||i.price<r[i.category].price)&&(r[i.category]=i),r),{});return Object.values(c).sort(function(r,i){return r.price>i.price?1:-1})}else if(e==="productlist")return o==="all"?t:s.filter(c=>c.category===o)}}});export{T as p};
