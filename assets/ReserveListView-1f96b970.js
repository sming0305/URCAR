import{c as g}from"./cartStore-a879a989.js";import{m as L,h as B,_ as F,r as T,o as r,c as i,a as t,F as v,i as D,k as _,p as z,n as w,b,w as f,q as O,s as q,f as d,v as J,l as A,d as h,t as a,j as G,g as Y,e as H}from"./index-77b9432d.js";const K={data(){return{productTemp:{product:{origin_price:0,price:0},rentInfo:{carColor:"",endDate:"end",endTime:"",location:"",startDate:"start",startTime:""}},range:{start:null,end:null},isDateRepeat:!1,formError:!1}},methods:{...L(g,["editProduct"]),switchImage(o){this.productTemp.colorImageUrl=o.imageUrl,this.productTemp.rentInfo.carColor=o.color},checkSend(){if(this.formError=!1,Object.values(this.productTemp.rentInfo).find(m=>m==="")===""){this.formError=!0;return}else this.editProduct(this.productTemp.rentInfo,this.productTemp.qty,this.productTemp.id,this.productTemp.product_id)}},computed:{...B(g,["modalProduct"]),disabledDates(){return[{start:null,end:new Date}]},parseStartDate(){let o="";return this.range.start!==null&&(o=`${this.range.start.getFullYear()}/${this.range.start.getMonth()+1}/${this.range.start.getDate()}`),o},parseEndDate(){let o="";return this.range.end!==null&&(o=`${this.range.end.getFullYear()}/${this.range.end.getMonth()+1}/${this.range.end.getDate()}`),o}},watch:{modalProduct(){this.productTemp=JSON.parse(JSON.stringify(this.modalProduct))},parseStartDate(){this.isDateRepeat=!1,this.productTemp.rentInfo.startDate=this.parseStartDate,this.parseStartDate===this.parseEndDate&&(this.isDateRepeat=!0,this.range.start=null,this.range.end=null,this.productTemp.rentInfo.startDate="",this.productTemp=JSON.parse(JSON.stringify(this.modalProduct)))},parseEndDate(){this.isDateRepeat=!1,this.productTemp.rentInfo.endDate=this.parseEndDate,this.parseStartDate===this.parseEndDate&&(this.isDateRepeat=!0,this.range.start=null,this.range.end=null,this.productTemp.rentInfo.endDate="",this.productTemp.rentInfo.startDate="",this.productTemp=JSON.parse(JSON.stringify(this.modalProduct)))},range(){const o=new Date(this.range.start),n=new Date(this.range.end),m=Math.abs(n.getTime()-o.getTime()),k=Math.ceil(m/(1e3*60*60*24));this.productTemp.qty=k}}},W={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},X={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},Z={class:"modal-content container"},tt=t("h2",{class:"fs-15 fw-bold border-bottom border-2 p-10 border-dark"},"調整預約內容",-1),et={class:"card mb-3 rounded-0 border-0 mb-25 pb-5"},ot={class:"row g-0"},st={class:"col-xl-6"},nt={class:"d-flex align-items-center h-100"},lt=["src"],at={class:"col-xl-6"},rt={class:"card-body d-flex flex-column justify-content-between h-100 mb-5 px-0 px-lg-8 pb-0"},it=t("h5",{class:"card-title fw-bold mb-6"},null,-1),dt={class:"mb-8"},ct={class:"btn-group align-items-center",role:"group","aria-label":"Basic radio toggle button group"},mt=t("p",{class:"m-0 me-5 fs-8"},"選擇車色 :",-1),pt=["id","checked","value"],ht=["for","onClick"],ut=t("div",{class:"mb-3"},[t("div",{class:"d-flex justify-content-center align-items-center"},[t("label",{for:"editStartDate ",class:"form-label col-4 col-sm-3 col-md-2 mb-0 flex-shrink-0 flex-grow-1"},"取車日期 : "),t("label",{for:"editEndDate",class:"form-label col-4 col-sm-3 col-md-2 mb-0 flex-grow-1"},"還車日期 : ")])],-1),_t={class:"mb-5"},bt={class:"d-flex justify-content-center align-items-center"},ft=["value"],gt=["value"],vt={key:0,class:"text-danger"},kt=t("small",null,"旅程最短租賃期為一日(24小時)，跨日租賃不足24小時將以一日計費，請貴賓留意。",-1),yt=[kt],Tt={class:"mb-5 row align-items-center"},Dt=t("label",{for:"startTime",class:"form-label col-4 col-sm-3 col-md-2 mb-0"},"取車時間 ",-1),wt={class:"col-8 col-sm-9 col-md-10"},Ct=Y('<option value="" selected disabled>請選擇取車時間</option><option value="8:00">8:00</option><option value="9:00">9:00</option><option value="10:00">10:00</option><option value="11:00">11:00</option><option value="12:00">12:00</option><option value="13:00">13:00</option><option value="14:00">14:00</option><option value="15:00">15:00</option><option value="16:00">16:00</option><option value="17:00">17:00</option><option value="18:00">18:00</option><option value="19:00">19:00</option><option value="20:00">20:00</option>',14),xt=[Ct],It={class:"mb-5 row align-items-center"},$t=t("label",{for:"endTime",class:"form-label col-4 col-sm-3 col-md-2 mb-0"},"還車時間 ",-1),St={class:"col-8 col-sm-9 col-md-10"},Pt=Y('<option value="" selected disabled>請選擇還車時間</option><option value="8:00">8:00</option><option value="9:00">9:00</option><option value="10:00">10:00</option><option value="11:00">11:00</option><option value="12:00">12:00</option><option value="13:00">13:00</option><option value="14:00">14:00</option><option value="15:00">15:00</option><option value="16:00">16:00</option><option value="17:00">17:00</option><option value="18:00">18:00</option><option value="19:00">19:00</option><option value="20:00">20:00</option>',14),Et=[Pt],Vt={class:"mb-5 row align-items-center"},Mt=t("label",{for:"location",class:"form-label col-4 col-sm-3 col-md-2 mb-0"},"取車地址 ",-1),Nt={class:"col-8 col-sm-9 col-md-10"},jt={class:"d-flex justify-content-between align-items-center"},Ut={class:"fs-7"},Rt=t("del",null,null,-1),Ot={class:"fs-9 fw-bold"},qt={key:0,class:"text-danger"},Jt=t("small",null,"! 預約資訊請填妥完整才可修改 ! ",-1),Lt=[Jt],Bt={class:"d-flex justify-content-end"},Ft=t("button",{type:"button",class:"btn btn-dark rounded-1 me-10","data-bs-dismiss":"modal"}," 取消修改 ",-1);function Yt(o,n,m,k,l,u){const y=T("VDatePicker");return r(),i("div",W,[t("div",X,[t("div",Z,[t("div",null,[tt,t("div",et,[t("div",ot,[t("div",st,[t("div",nt,[t("img",{src:l.productTemp.colorImageUrl,alt:"",class:"flex-shrink-1 d-block",style:{width:"100%","max-height":"405px"}},null,8,lt)])]),t("div",at,[t("div",rt,[it,t("form",null,[t("div",dt,[t("div",ct,[mt,(r(!0),i(v,null,D(l.productTemp.product.carColor,(s,c)=>(r(),i(v,{key:c},[_(t("input",{type:"radio",class:"btn-check",name:"btnradio",id:`btnradio${c}`,checked:s.imageUrl===l.productTemp.colorImageUrl,value:s.color,"onUpdate:modelValue":n[0]||(n[0]=p=>l.productTemp.rentInfo.carColor=p)},null,8,pt),[[z,l.productTemp.rentInfo.carColor]]),t("label",{class:w(["btn rounded-0 me-5 rounded-1 border-gray",{"btn-danger":s.color==="red","btn-blue":s.color==="blue","btn-dark":s.color==="dark","btn-gray-600":s.color==="gray"}]),for:`btnradio${c}`,style:{height:"25px"},onClick:p=>u.switchImage(s)},null,10,ht)],64))),128))])]),ut,t("div",_t,[b(y,{modelValue:l.range,"onUpdate:modelValue":n[1]||(n[1]=s=>l.range=s),"is-range":"","disabled-dates":u.disabledDates},{default:f(({inputEvents:s})=>[t("div",bt,[t("input",O({value:l.productTemp.rentInfo.startDate},q(s.start,!0),{id:"editStartDate",class:"form-control me-4",readonly:""}),null,16,ft),t("input",O({value:l.productTemp.rentInfo.endDate},q(s.end,!0),{id:"editEndDate",class:"form-control",readonly:""}),null,16,gt)])]),_:1},8,["modelValue","disabled-dates"]),l.isDateRepeat===!0?(r(),i("span",vt,yt)):d("",!0)]),t("div",Tt,[Dt,t("div",wt,[_(t("select",{name:"",id:"startTime",class:"form-control fs-7","onUpdate:modelValue":n[2]||(n[2]=s=>l.productTemp.rentInfo.startTime=s)},xt,512),[[J,l.productTemp.rentInfo.startTime]])])]),t("div",It,[$t,t("div",St,[_(t("select",{name:"",id:"endTime",class:"form-control fs-7","onUpdate:modelValue":n[3]||(n[3]=s=>l.productTemp.rentInfo.endTime=s)},Et,512),[[J,l.productTemp.rentInfo.endTime]])])]),t("div",Vt,[Mt,t("div",Nt,[_(t("input",{type:"text",class:"form-control",id:"location",placeholder:"請輸入您的取車地點地址","onUpdate:modelValue":n[4]||(n[4]=s=>l.productTemp.rentInfo.location=s)},null,512),[[A,l.productTemp.rentInfo.location]])])]),t("div",jt,[t("p",Ut,[h("原價 : "+a(l.productTemp.product.origin_price),1),Rt]),t("p",Ot,a(l.productTemp.product.price)+"/ 天",1)]),l.formError===!0?(r(),i("span",qt,Lt)):d("",!0),t("div",Bt,[Ft,t("input",{type:"submit",class:"btn btn-dark rounded-1",value:"確認修改","data-bs-dismiss":"modal",onClick:n[5]||(n[5]=G(s=>u.checkSend(),["prevent"]))})])])])])])])])])])])}const Qt=F(K,[["render",Yt]]),zt={components:{ModalComponent:Qt},methods:{...L(g,["cartChcek","deleteCart","deleteTargetProduct","addCoupon","checkCoupon","openTargetProduct"])},computed:{...B(g,["carts","final_total","discountPrice","couponCodeError"])},mounted(){this.cartChcek(),this.checkCoupon()}},At={class:"pt-30 pb-15"},Gt={class:"container pt-30"},Ht={class:"mb-15"},Kt={class:"d-flex justify-content-between align-items-center border-bottom border-2 border-dark mb-10"},Wt=t("h2",{class:"fs-20 fw-bold"},"預約清單",-1),Xt={class:"card mb-3 rounded-0 border-0 mb-15 border-bottom border-2 border-dark pb-10"},Zt={key:0,class:"s-18 fw-bold text-center"},te={class:"col-xl-6 d-flex align-items-center"},ee=["src","alt"],oe={class:"col-xl-6"},se={class:"card-body d-flex flex-column justify-content-between h-100 mb-5 px-0 px-lg-8 pb-0"},ne={class:"card-title fw-bold mb-6"},le={class:"row"},ae={class:"d-flex align-items-center mb-10"},re=t("span",{class:"me-5"},"車色 :",-1),ie={class:"col-12 col-sm-6 mb-7"},de={class:"col-12 col-sm-6 mb-7"},ce={class:"col-12 col-sm-6 mb-7"},me={class:"col-12 col-sm-6 mb-7"},pe={class:"col-12 mb-7"},he={class:"col-12 col-sm-6 mb-7"},ue={class:"col-12 col-sm-6 mb-7"},_e={class:"col-12 col-sm-6 mb-7"},be={class:"col-12 col-sm-6 mb-7"},fe={class:"d-flex justify-content-end"},ge=["onClick"],ve=["onClick"],ke=t("h2",{class:"fs-20 fw-bold text-start"},"金額計算",-1),ye={class:"w-100 text-end mb-10"},Te=t("thead",null,[t("tr",null,[t("th",{width:"25%"}),t("th",{width:"25%"}),t("th",{width:"25%"}),t("th",{width:"25%"})])],-1),De=t("td",{colspan:"3"},[t("label",{for:"coupon",class:"me-4 mb-8 fs-10"},"輸入優惠卷 :")],-1),we={class:"border-bottom border-dark border-2"},Ce={colspan:"4"},xe={key:0,class:"text-danger mb-8"},Ie=t("small",null,"優惠卷折扣碼不存在，請留意字母大小寫並重新輸入。",-1),$e=[Ie],Se={key:1,class:"mb-8"},Pe={colspan:"2",class:"text-start pt-5"},Ee={colspan:"2",class:"pt-5"},Ve={colspan:"2",class:"text-start pt-5"},Me={key:0,colspan:"2",class:"pt-5"},Ne=t("td",{colspan:"3",class:"fs-12 pt-5"},"總計 :",-1),je={class:"fs-12 pt-5"},Ue={class:"d-flex justify-content-end"};function Re(o,n,m,k,l,u){var c,p,C;const y=T("ModalComponent"),s=T("RouterLink");return r(),i("main",null,[t("section",At,[t("div",Gt,[t("div",Ht,[t("div",Kt,[Wt,t("button",{type:"button",class:"btn btn-danger mb-5 btn-sm",onClick:n[0]||(n[0]=(...e)=>o.deleteCart&&o.deleteCart(...e))}," 刪除全部預約 ")]),t("div",Xt,[((c=o.carts)==null?void 0:c.length)===0?(r(),i("h2",Zt," 目前沒有預約的車輛訂單。 ")):d("",!0),(r(!0),i(v,null,D(o.carts,e=>{var x,I,$,S,P,E,V,M,N,j,U,R;return r(),i("div",{class:"row g-0 mb-5 border-bottom pb-5 border-dark",key:e.product.title},[t("div",te,[t("img",{src:e.colorImageUrl,alt:e.product.title,class:"flex-shrink-1 d-block",style:{width:"100%","max-height":"280px"}},null,8,ee)]),t("div",oe,[t("div",se,[t("ul",null,[t("li",null,[t("h5",ne,a(e.product.title),1),t("ul",le,[t("li",ae,[re,t("div",{style:{width:"20px",height:"20px"},class:w(["rounded-1",{"bg-danger":((x=e==null?void 0:e.rentInfo)==null?void 0:x.carColor)==="red","bg-blue":((I=e==null?void 0:e.rentInfo)==null?void 0:I.carColor)==="blue","bg-dark":(($=e==null?void 0:e.rentInfo)==null?void 0:$.carColor)==="dark","bg-gray-600":((S=e==null?void 0:e.rentInfo)==null?void 0:S.carColor)==="gray",border:((P=e==null?void 0:e.rentInfo)==null?void 0:P.carColor)==="white","border-gray":((E=e==null?void 0:e.rentInfo)==null?void 0:E.carColor)==="white","border-1":((V=e==null?void 0:e.rentInfo)==null?void 0:V.carColor)==="white"}])},null,2)]),t("li",ie," 取車日期 : "+a((M=e==null?void 0:e.rentInfo)==null?void 0:M.startDate),1),t("li",de," 還車日期 : "+a((N=e==null?void 0:e.rentInfo)==null?void 0:N.endDate),1),t("li",ce," 取車時間 : "+a((j=e==null?void 0:e.rentInfo)==null?void 0:j.startTime),1),t("li",me," 還車時間 : "+a((U=e==null?void 0:e.rentInfo)==null?void 0:U.endTime),1),t("li",pe,"取車地點 : "+a((R=e.rentInfo)==null?void 0:R.location),1),t("li",he," 原價 : "+a(e.product.origin_price)+" / 天 ",1),t("li",ue," 優惠 : "+a(e.product.price)+" / 天 ",1),t("li",_e,"租用計價天數 : "+a(e.qty)+" 天",1),t("li",be,"總計費用 : "+a(e.total)+" 元",1)])])]),t("div",fe,[t("button",{type:"button",class:"btn btn-danger rounded-1 me-10 btn-sm",onClick:Q=>o.deleteTargetProduct(e.id)}," 取消此預約 ",8,ge),t("button",{type:"button",class:"btn btn-dark rounded-1 btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:Q=>o.openTargetProduct(e)}," 修改內容 ",8,ve),b(y,{ref_for:!0,ref:"modal"},null,512)])])])])}),128))]),t("div",null,[d("",!0),ke,t("table",ye,[Te,t("tbody",null,[t("tr",null,[De,t("td",null,[t("input",{type:"text",class:"form-control py-2 rounded-0 bg-gray border-0 mb-8",id:"coupon",onChange:n[1]||(n[1]=e=>o.addCoupon(e))},null,32)])]),t("tr",we,[t("td",Ce,[o.couponCodeError===!0?(r(),i("p",xe,$e)):d("",!0),o.couponCodeError===!1?(r(),i("p",Se,[t("small",null,[h("找不到優惠卷?，參考我們的 "),b(s,{target:"_blank",class:"text-blue",to:"/article/-NQYEpGrnCt0ky7Qq_9q"},{default:f(()=>[h("優惠新訊")]),_:1})])])):d("",!0)])]),(r(!0),i(v,null,D(o.carts,e=>(r(),i("tr",{key:e.product.title},[t("td",Pe,a(e.product.title),1),t("td",Ee,a(e.total)+" $",1)]))),128)),t("tr",null,[t("td",Ve,a((C=(p=o.carts[0])==null?void 0:p.coupon)==null?void 0:C.title),1),o.discountPrice!==0&&o.discountPrice!=="0"?(r(),i("td",Me," - "+a(o.discountPrice)+" $ ",1)):d("",!0)]),t("tr",null,[Ne,t("td",je,a(o.final_total)+" $",1)])])]),t("div",Ue,[b(s,{to:"/productList",class:w(["btn btn-dark rounded-0",{"me-20":o.carts.length!==0}])},{default:f(()=>[h("預約其他車款")]),_:1},8,["class"]),o.carts.length!==0?(r(),H(s,{key:0,to:"/createOrder",class:"btn btn-dark rounded-0"},{default:f(()=>[h("填寫預約人資料 ")]),_:1})):d("",!0)])])])])])])}const Je=F(zt,[["render",Re]]);export{Je as default};
