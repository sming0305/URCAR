import{bu as h,bv as o}from"./index-9c465650.js";const{VITE_API_PATH:n,VITE_API_URL:c}={VITE_API_PATH:"truth",VITE_API_URL:"https://vue3-course-api.hexschool.io/v2/",BASE_URL:"/URCAR/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},f=h("articleStore",{state:()=>({articleList:[],allArticleList:[],getAll:!1,articleTemp:{},articlePagination:{},currentRoute:"",currentTag:"",category:"all"}),actions:{getArticles(e,t){this.allArticleList.length===0&&(this.getAll=!1),this.currentRoute="",o.get(`${c}api/${n}/articles?page=${t}`).then(i=>{this.articleList=i.data.articles,this.articlePagination=i.data.pagination,this.currentRoute=e,this.articlePagination.total_pages>1&&this.getAll===!1&&this.getAllArticle(this.articlePagination.total_pages)}).catch(i=>{console.log(i)})},getAllArticle(e){for(let t=0;t<e;t++)o.get(`${c}api/${n}/articles?page=${t+1}`).then(i=>{i.data.articles.forEach(s=>this.allArticleList.push(s))}).catch(i=>{console.log(i)}),this.getAll=!0},toDate(e){return new Date(e*1e3).toLocaleDateString()},switchCategory(e){this.category=e},getTargetArticle(e){this.articleTemp={},o.get(`${c}api/${n}/article/${e}`).then(t=>{this.articleTemp=t.data.article,this.currentTag=t.data.article.tag[0]}).catch(t=>{console.log(t)})}},getters:{showArticleList:({articleList:e,currentRoute:t,currentTag:i,category:s,allArticleList:g})=>{const l=e.sort(function(r,a){return r.create_at<a.create_at?1:-1});if(t==="articlelist")return s==="all"?l:g.filter(a=>(a==null?void 0:a.tag[0])===s);if(t==="home"){const r=Math.floor(Math.random()*l.length);let a;do a=Math.floor(Math.random()*l.length);while(a===r);return[l[r],l[a]]}else if(t==="article")return g.filter(a=>(a==null?void 0:a.tag[0])===i)},articleConvert:({articleTemp:e})=>{let t=e.content;return t=t.replace(/\/n/g,"<br/><br/>").replace(/\/p/g,"<p>").replace(/\/[^/]*$/,""),t}}});export{f as a};
